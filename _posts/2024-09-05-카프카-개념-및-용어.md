---
title: "카프카의 주요 개념 및 용어"
categories:
  - kafka_basic
tags:
  - kafka
header:
  overlay_color: "#000"
  overlay_filter: "0.5"
toc: true
toc_sticky: true
---

![image](/assets/images/kafka/apache_kafka_logo_icon.png)

# 주요 개념 및 용어
![image](/assets/images/kafka/20240905_1.png)
- `KafkaCluster`
  - 카프카의 브로커(broker)들의 모임 => 확장성과 고가용성을 위해서 borker들이 클러스터로 구성
  - 보통 3개 이상으로 구성하는 것을 권장한다고 한다
  - 설정은 어떻게..? 하는거지? => 찾아보니 설정 파일로 조정하는게 아니라 실제로 추가하거나 제거하는 작업을 해야한다고 함! 어렵구먼
- `Broker`
  - 각각의 카프카 서버
- `Zookeeper`
  - 카프카 클러스터 정보 및 분산처리 관리 등 메타데이터 저장
  - 곧 카프카 클러스터랑 통합 예정이라는데 언제쯤..?
- `Producer`
  - 메세지를 발행하여 생산하는 주체
  - 쉽게 말해 카프카에 메세지를 보내기
- `Consumer`
  - 메세지를 구독하여 소비하는 주체
  - 쉽게 말해 카프카에서 메세지를 꺼내 읽기

## 카프카의 상세 구조 : 토픽, 파티션, 오프셋
![image](/assets/images/kafka/20240905_2.png)
- `Topic`
  - 메세지를 구분하는 단위
  - 폴더와 유사하다고 생각하면 쉽다
- `Partition`
  - 메세지를 저장하는 물리적인 파일
  - 폴더안에 들어있는 파일들이라고 생각하면 쉽다
  - 한개의 토픽은 한개의 파티션으로 구성되어 있음
  - 파티션은 메세지 추가만 가능함
- `Offset`
  - 파티션 내 각 메세지가 저장되어있는 상대적인 위치
  - 프로듀서가 넣는 메세지는 파티션의 맨 뒤에 추가 된다 => 왜냐면 카프카는 `Queue`형태니깐
  - 컨슈머는 `offset` 기준으로 순서대로 메세지를 읽음
  - 파티션의 메시지 파일은 처리 후에도 계속 저장되어 있어 설정에 따라 일정시간 뒤 삭제됨
    - 설정은 어디서..하는거지?
- `Replication`
  - 파티션의 복제
  - `Leader partition`과 `Follower partition`은 파티션의 데이터 복제 및 고가용성을 위해 사용
  - ISR(In-Sync Replicas) : 리더와 동기화된 복제본들의 집합
  - 데이터의 일관성을 보장하고 장애 발생 시 데이터 손실을 최소화하는데 중요한 역할 => 가용성 보장!

# Zookeeper

# Broker

# Producer
- 메세지를 발행하여 생산하는 주체
- 프로듀서는 메시지 전송 시 토픽을 지정할 수 있고, 파티션 번호를 지정할 수 있음
  - 파티션 번호를 지정했다면 동일한 파티션 번호에 메세지가 저장됨
  - 파티션 번호가 없다면? 라운드로빈 방식으로 적절하게 분배됨

# Consumer

# 출처
- https://ifuwanna.tistory.com/487
- https://medium.com/@0joon/10%EB%B6%84%EC%95%88%EC%97%90-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-kafka-bed877e7a3bc
